<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Descubra o Dia da Sua Morte</title>

  <style>
    /* Reset e b√°sico */
    * {
      box-sizing: border-box;
    }
    html, body {
      margin: 0; padding: 0; height: 100%;
      background: black url('https://img.freepik.com/fotos-premium/arvore-preta-seca-sem-folhas-com-ceu-vermelho-sangue-assustador-fundo-de-natureza-de-arvore-de-horror-assustador-para-o-halloween_696486-50.jpg') no-repeat center center fixed;
      background-size: cover;
      font-family: 'Georgia', serif;
      color: white;
      overflow-x: hidden;
      user-select: none;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    #ad-space {
      width: 100%;
      height: 90px;
      background: black;
      position: fixed;
      bottom: 0;
      left: 0;
      z-index: 1000;
      box-shadow: inset 0 0 20px crimson;
    }

    #sound-control {
      position: fixed;
      top: 15px;
      right: 15px;
      background: rgba(220,20,60,0.9);
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 28px;
      color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 15px crimson;
      z-index: 1001;
      user-select: none;
      transition: background-color 0.3s ease;
    }
    #sound-control:hover {
      background-color: crimson;
    }

    #container {
      max-width: 460px;
      margin: auto;
      background: rgba(0,0,0,0.85);
      padding: 30px 30px 60px 30px;
      border-radius: 14px;
      box-shadow: 0 0 40px crimson;
      position: relative;
      min-height: calc(100vh - 90px - 40px);
      display: flex;
      flex-direction: column;
      justify-content: center;
      z-index: 100;
    }

    h1 {
      font-size: 2.8rem;
      text-align: center;
      margin-bottom: 28px;
      text-shadow: 0 0 16px crimson;
      user-select: none;
    }

    #intro-screen, #questions, #result {
      user-select: none;
      flex-grow: 1;
    }

    #intro-screen {
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    #intro-screen p {
      font-size: 1.4rem;
      margin-bottom: 42px;
      line-height: 1.5;
    }
    #start-btn {
      background: crimson;
      border: none;
      padding: 24px 0;
      width: 100%;
      font-size: 1.9rem;
      font-weight: 900;
      border-radius: 14px;
      color: white;
      cursor: pointer;
      box-shadow: 0 0 20px crimson;
      user-select: none;
      transition: background-color 0.3s ease;
    }
    #start-btn:hover {
      background-color: #b30000;
    }

    .question {
      display: none;
      animation: fadeIn 0.4s ease forwards;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    .question.active {
      display: flex;
    }
    .question p {
      font-size: 1.4rem;
      margin-bottom: 22px;
      text-align: center;
      user-select: none;
    }

    .options {
      display: flex;
      justify-content: space-between;
      margin-bottom: 22px;
    }
    .options button {
      flex: 1;
      margin: 0 12px;
      padding: 18px 0;
      background: #330000;
      border: 2px solid crimson;
      border-radius: 11px;
      color: white;
      font-weight: 700;
      font-size: 1.3rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
      user-select: none;
      box-shadow: 0 0 6px #660000 inset;
    }
    .options button:hover {
      background-color: crimson;
    }
    .options button.selected {
      background-color: crimson;
      box-shadow: 0 0 14px #ff0000;
    }

    input[type="text"] {
      width: 100%;
      padding: 16px 14px;
      font-size: 1.3rem;
      border-radius: 14px;
      border: 2px solid crimson;
      background: black;
      color: white;
      box-shadow: 0 0 12px crimson;
      user-select: text;
      text-align: center;
      font-weight: 600;
      user-select: text;
    }
    input::placeholder {
      color: #ccc;
      font-style: italic;
    }

    #next-btn {
      background: crimson;
      border: none;
      width: 100%;
      padding: 22px 0;
      font-weight: 900;
      font-size: 1.7rem;
      color: white;
      border-radius: 14px;
      cursor: pointer;
      box-shadow: 0 0 28px crimson;
      user-select: none;
      margin-top: 16px;
      transition: background-color 0.3s ease;
      display: none;
    }
    #next-btn:hover {
      background-color: #b30000;
    }

    #result {
      text-align: center;
      display: none;
      user-select: none;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    #result img {
      max-width: 160px;
      margin-bottom: 24px;
      filter: drop-shadow(0 0 18px crimson);
      align-self: center;
    }
    #result h2 {
      font-size: 2.4rem;
      margin-bottom: 24px;
      text-shadow: 0 0 20px crimson;
    }
    #result p {
      font-size: 1.35rem;
      line-height: 1.45;
      margin: 0 12px 34px 12px;
    }

    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }
  </style>
</head>

<body>

  <!-- Espa√ßo fixo para an√∫ncios -->
  <div id="ad-space"></div>

  <button id="sound-control" title="Ativar / Desativar som">üîà</button>

  <div id="container">

    <!-- Tela inicial -->
    <div id="intro-screen">
      <h1>Descubra o Dia da Sua Morte</h1>
      <p>Ser√° que voc√™ sabe quando vai morrer? Responda algumas perguntas simples e descubra seu destino.</p>
      <button id="start-btn">Come√ßar</button>
    </div>

    <!-- Perguntas -->
    <div id="questions">

      <div class="question" data-step="1">
        <p>Voc√™ fuma?</p>
        <div class="options">
          <button data-value="sim">Sim</button>
          <button data-value="√†s vezes">√Äs vezes</button>
          <button data-value="n√£o">N√£o</button>
        </div>
      </div>

      <div class="question" data-step="2">
        <p>Qual o seu nome?</p>
        <input type="text" id="name" placeholder="Digite seu nome aqui" autocomplete="off" />
      </div>

      <div class="question" data-step="3">
        <p>Qual a sua data de nascimento?</p>
        <input
          type="text"
          id="birthdate"
          placeholder="Digite sua data de nascimento (dd/mm/aaaa)"
          inputmode="numeric"
          maxlength="10"
          autocomplete="off"
        />
      </div>

      <button id="next-btn">Pr√≥ximo</button>
    </div>

    <!-- Resultado -->
    <div id="result">
      <img src="https://segredosdomundo.r7.com/wp-content/uploads/2021/12/10-anjos-da-morte-mais-conhecidos-na-biblia-e-na-mitologia-e1639504697683.jpg" alt="Anjo da Morte" />
      <h2>Seu destino est√° tra√ßado...</h2>
      <p id="result-text"></p>
      <p id="result-details"></p>
    </div>

  </div>

  <audio id="background-audio" loop>
    <source src="https://cdn.jsdelivr.net/gh/gabriellima2025/audio/musica_suspense_baixa.mp3" type="audio/mpeg" />
    Seu navegador n√£o suporta √°udio.
  </audio>

<script>
  const startBtn = document.getElementById('start-btn');
  const introScreen = document.getElementById('intro-screen');
  const questions = document.getElementById('questions');
  const questionDivs = document.querySelectorAll('.question');
  const nextBtn = document.getElementById('next-btn');
  const resultDiv = document.getElementById('result');
  const resultText = document.getElementById('result-text');
  const resultDetails = document.getElementById('result-details');
  const soundControl = document.getElementById('sound-control');
  const bgAudio = document.getElementById('background-audio');

  // Vari√°veis para armazenar respostas
  const answers = {};

  let currentStep = 0;

  // Lista de causas comuns para a morte, baseado nas respostas
  const causes = [
    {cause: "parada card√≠aca inesperada causada por hipertens√£o.", condition: (a) => a.fuma === "sim"},
    {cause: "complica√ß√µes de diabetes.", condition: (a) => a.fuma === "√†s vezes"},
    {cause: "um acidente vascular cerebral (AVC).", condition: (a) => a.fuma === "n√£o"},
  ];

  // Controle de nomes j√° usados (localStorage)
  let usedNames = JSON.parse(localStorage.getItem('usedNames') || '[]');

  // Fun√ß√£o pra formatar data em dd/mm/aaaa e inserir barras automaticamente
  function formatDate(value) {
    let val = value.replace(/\D/g, '');
    if(val.length > 8) val = val.slice(0,8);
    if(val.length >= 5) {
      return val.slice(0,2) + '/' + val.slice(2,4) + '/' + val.slice(4,8);
    } else if(val.length >= 3) {
      return val.slice(0,2) + '/' + val.slice(2,4);
    } else if(val.length >= 1) {
      return val;
    }
    return '';
  }

  // Atualiza o input da data para ter as barras enquanto digita
  const birthInput = document.getElementById('birthdate');
  birthInput.addEventListener('input', e => {
    const cursorPos = e.target.selectionStart;
    let oldLength = e.target.value.length;
    e.target.value = formatDate(e.target.value);
    // Ajusta cursor pra n√£o pular as barras
    let newLength = e.target.value.length;
    let diff = newLength - oldLength;
    if(diff > 0 && cursorPos === oldLength) {
      e.target.selectionStart = e.target.selectionEnd = cursorPos + diff;
    }
  });

  // Fun√ß√£o para calcular idade aproximada pela data de nascimento
  function calcAge(birth) {
    let parts = birth.split('/');
    if(parts.length !== 3) return null;
    let day = parseInt(parts[0], 10);
    let month = parseInt(parts[1], 10) - 1;
    let year = parseInt(parts[2], 10);
    let birthDate = new Date(year, month, day);
    let today = new Date();
    let age = today.getFullYear() - birthDate.getFullYear();
    let m = today.getMonth() - birthDate.getMonth();
    if(m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
      age--;
    }
    return age;
  }

  // Fun√ß√£o para avan√ßar para pr√≥xima pergunta
  function showStep(step) {
    questionDivs.forEach(div => {
      div.classList.remove('active');
      if(parseInt(div.getAttribute('data-step')) === step) {
        div.classList.add('active');
      }
    });
    nextBtn.style.display = 'block';
    currentStep = step;
  }

  // Come√ßar o question√°rio
  startBtn.addEventListener('click', () => {
    introScreen.style.display = 'none';
    questions.style.display = 'flex';
    showStep(1);
  });

  // Controle para sele√ß√£o das respostas (bot√µes)
  document.querySelectorAll('.options button').forEach(button => {
    button.addEventListener('click', e => {
      const parent = button.closest('.question');
      parent.querySelectorAll('button').forEach(btn => btn.classList.remove('selected'));
      button.classList.add('selected');
      // Salva resposta
      if(parent.getAttribute('data-step') === '1') {
        answers.fuma = button.getAttribute('data-value');
      }
      nextBtn.style.display = 'inline-block';
    });
  });

  // Bot√£o pr√≥ximo
  nextBtn.addEventListener('click', () => {
    if(currentStep === 1) {
      // Verifica se respondeu
      if(!answers.fuma) {
        alert('Por favor, selecione uma op√ß√£o para continuar.');
        return;
      }
      showStep(2);
      nextBtn.style.display = 'none';
      document.getElementById('name').focus();
    } else if(currentStep === 2) {
      const nameInput = document.getElementById('name');
      const nameVal = nameInput.value.trim();
      if(nameVal.length < 2) {
        alert('Digite seu nome corretamente para continuar.');
        nameInput.focus();
        return;
      }
      if(usedNames.includes(nameVal.toLowerCase())) {
        alert('Voc√™ j√° consultou com esse nome. Use outro para consultar novamente.');
        nameInput.focus();
        return;
      }
      answers.nome = nameVal;
      showStep(3);
      nextBtn.style.display = 'none';
      birthInput.focus();
    } else if(currentStep === 3) {
      const birthVal = birthInput.value.trim();
      if(!/^\d{2}\/\d{2}\/\d{4}$/.test(birthVal)) {
        alert('Digite sua data de nascimento no formato dd/mm/aaaa');
        birthInput.focus();
        return;
      }
      answers.dataNasc = birthVal;
      // Processar resultado
      showResult();
    }
  });

  // Mostrar resultado
  function showResult() {
    questions.style.display = 'none';
    resultDiv.style.display = 'flex';

    usedNames.push(answers.nome.toLowerCase());
    localStorage.setItem('usedNames', JSON.stringify(usedNames));

    // Calcular idade atual e idade da morte
    const idadeAtual = calcAge(answers.dataNasc);
    if(idadeAtual === null) {
      resultText.textContent = 'Erro ao calcular sua idade.';
      resultDetails.textContent = '';
      return;
    }
    // Definindo idade da morte (aleat√≥ria + base)
    // Base: se fuma "sim" morre mais cedo, "√†s vezes" m√©dio, "n√£o" mais tarde
    let idadeMorteBase = 70;
    if(answers.fuma === 'sim') idadeMorteBase = 55;
    else if(answers.fuma === '√†s vezes') idadeMorteBase = 65;

    // Ajuste aleat√≥rio de -5 a +10 anos
    const randomAdj = Math.floor(Math.random() * 16) - 5;
    let idadeMorte = idadeMorteBase + randomAdj;
    if(idadeMorte < idadeAtual + 1) idadeMorte = idadeAtual + 1;

    // Ano da morte
    const anoNasc = parseInt(answers.dataNasc.split('/')[2], 10);
    const anoMorte = anoNasc + idadeMorte;

    // Causa da morte (simplificada)
    let causa = '';
    if(answers.fuma === 'sim') {
      causa = 'uma parada card√≠aca inesperada causada por hipertens√£o.';
    } else if(answers.fuma === '√†s vezes') {
      causa = 'complica√ß√µes de diabetes.';
    } else {
      causa = 'um acidente vascular cerebral (AVC).';
    }

    // Cidades pr√≥ximas fixas
    const cidades = ['Jaguaribe', 'Jaguaribara', 'Limoeiro', 'Itai√ßaba', 'Aracati', 'Morada Nova'];
    const cidade = cidades[Math.floor(Math.random() * cidades.length)];

    // Monta texto
    resultText.textContent = `${answers.nome}, seu fim acontecer√° exatamente assim. Voc√™ ter√° ${causa}`;
    resultDetails.textContent = `Data e hora exatas da morte: 00:00h do dia 31/12/${anoMorte}. Voc√™ ter√° ${idadeMorte} anos. Local da morte: ${cidade}.`;

    // Scroll para resultado (em caso de celular)
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  // Som ambiente
  let audioPlaying = false;
  bgAudio.volume = 0.15; // volume baixo
  bgAudio.play().catch(() => {
    // Som s√≥ toca ap√≥s intera√ß√£o, bot√£o ativa
  });

  soundControl.addEventListener('click', () => {
    if(audioPlaying){
      bgAudio.pause();
      audioPlaying = false;
      soundControl.textContent = 'üîà';
    } else {
      bgAudio.play();
      audioPlaying = true;
      soundControl.textContent = 'üîä';
    }
  });

  // Centraliza o container verticalmente tamb√©m quando o conte√∫do mudar
  function centerContainer() {
    const container = document.getElementById('container');
    const vh = window.innerHeight;
    const adHeight = document.getElementById('ad-space').offsetHeight;
    container.style.minHeight = (vh - adHeight - 40) + 'px';
  }
  window.addEventListener('resize', centerContainer);
  window.addEventListener('load', centerContainer);
  centerContainer();

</script>

</body>
</html>
